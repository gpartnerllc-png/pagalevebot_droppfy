<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>V12 - Experiência Imersiva Pagaleve</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.10.4/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.18.0/dist/tf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.net.min.js"></script>
    <style>
        body { margin: 0; background: radial-gradient(circle, #001f3f 0%, #000 100%); overflow: hidden; font-family: 'Segoe UI', sans-serif; }
        #ui-layer { position: absolute; top: 20px; left: 20px; color: #00d4ff; z-index: 100; text-shadow: 0 0 10px #00d4ff; }
        .checkout-card { position: absolute; bottom: 50px; right: 50px; background: rgba(0, 40, 80, 0.8); padding: 20px; border-radius: 15px; border: 1px solid #00d4ff; backdrop-filter: blur(10px); color: white; width: 300px; }
        input { width: 100%; margin: 10px 0; padding: 10px; background: #000; border: 1px solid #00d4ff; color: #fff; border-radius: 5px; }
        button { width: 100%; padding: 12px; background: #00d4ff; border: none; font-weight: bold; cursor: pointer; transition: 0.3s; }
        button:hover { background: #fff; color: #000; box-shadow: 0 0 20px #00d4ff; }
    </style>

    <style>
        body { margin: 0; background: #000; overflow: hidden; font-family: 'Orbitron', sans-serif; }
        #interface { position: absolute; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 10; pointer-events: none; }
        .card { background: rgba(0, 20, 40, 0.85); border: 2px solid #00d4ff; border-radius: 20px; padding: 30px; width: 320px; pointer-events: auto; backdrop-filter: blur(10px); box-shadow: 0 0 30px rgba(0, 212, 255, 0.3); color: white; }
        h2 { color: #00d4ff; text-align: center; font-size: 1.2rem; margin-bottom: 20px; }
        input { width: 90%; background: #00050a; border: 1px solid #004466; color: #fff; padding: 12px; margin: 10px 0; border-radius: 8px; outline: none; }
        input:focus { border-color: #00d4ff; box-shadow: 0 0 10px #00d4ff; }
        button { width: 100%; padding: 15px; background: #00d4ff; border: none; border-radius: 8px; font-weight: bold; color: #000; cursor: pointer; transition: 0.3s; margin-top: 15px; }
        button:hover { background: #fff; transform: scale(1.02); box-shadow: 0 0 20px #fff; }
        #status { text-align: center; margin-top: 15px; font-size: 0.8rem; color: #00d4ff; }
    </style>
</head>
<body>
    <div id="ui-layer">
        <h1>SISTEMA DROPPFY IA OPERACIONAL</h1>
        <p>CONEXÃO SEGURA COM PAGALEVE ATIVA</p>
    </div>

    <div class="checkout-card">
        <h3>⚡ PIX PARCELADO D.IA</h3>
        <p id="product-name">Travesseiro de Seda Premium</p>
        <input type="text" id="cpf" placeholder="Seu CPF">
        <input type="text" id="cep" placeholder="Seu CEP">
        <button onclick="processarVenda()">FINALIZAR AGORA</button>
        <div id="status">AGUARDANDO CONEXÃO...</div>
    </div>

    <script>
        // Cenário 3D com Three.js
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // Geometria de Autoridade (O Objeto Flutuante)
        const geometry = new THREE.OctahedronGeometry(2, 0);
        const material = new THREE.MeshPhongMaterial({ color: 0x00d4ff, wireframe: true, emissive: 0x0044ff });
        const object = new THREE.Mesh(geometry, material);
        scene.add(object);

        const light = new THREE.PointLight(0xffffff, 1, 100);
        light.position.set(10, 10, 10);
        scene.add(light);
        camera.position.z = 5;

        function animate() {
            requestAnimationFrame(animate);
            object.rotation.y += 0.01;
            object.rotation.x += 0.005;
            renderer.render(scene, camera);
        }
        animate();

        // INTEGRAÇÃO COM A API DO ROBÔ
        async function processarVenda() {
            const cpf = document.getElementById('cpf').value;
            const cep = document.getElementById('cep').value;
            
            alert("V12 PROCESSANDO: Autenticando na Pagaleve...");
            
            // Aqui a Lambda entra em ação com suas chaves!
            const res = await fetch('https://mxkyrbqcwpcoqkhshtqjrfonvu0dwchv.lambda-url.sa-east-1.on.aws/', {
                method: 'POST',
                body: JSON.stringify({ 
                    apiKey: "01KF10NWVS30NQGHEJ99SFSBCS",
                    cpf: cpf,
                    cep: cep,
                    produto: "DROPPFY IA"
                })
            });
        }
    </script>

    <script>

    // --- CONEXÃO COM A LAMBDA D.IA PAGALEVE ---
        async function processarV12() {
            const cpf = document.getElementById('cpf').value;
            const cep = document.getElementById('cep').value;
            const status = document.getElementById('status');
            const btn = document.getElementById('btnFinalizar');

            if(!cpf || !cep) { alert("Preencha os dados de autoridade."); return; }

            status.innerText = "⚡ CONECTANDO AO CÉREBRO V12...";
            btn.disabled = true;

            try {
                const response = await fetch('https://4djefisdvvgqv4jl3j5x35mssi0vxfmv.lambda-url.sa-east-1.on.aws/', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ cpf, cep, partner_token: "01KF10NWVS30NQGHEJ99SFSBCS" })
                });

                const data = await response.json();
                status.innerText = "✅ SUCESSO! REDIRECIONANDO...";
                
                // Redireciona para o link gerado pela Pagaleve
                window.location.href = data.checkoutUrl || "https://loja.infinitepay.io/droppfy";
            } catch (err) {
                status.innerText = "❌ ERRO NA CONEXÃO. TENTE NOVAMENTE.";
                btn.disabled = false;
            }
        }
    </script>

<SCRIPT>
// BANCO DE DADOS DE DESTINOS V12
const DESTINOS = {
    VITRINE: "https://loja.infinitepay.io/partner12",
    LOJA_DROPPFY: "https://loja.infinitepay.io/droppfy",
    CARTAO_DIGITAL: "https://taggo.io/partner",
    PRODUTO_DIRETO: "https://pay.kiwify.com.br/CrMRKeP" // Ex: Produto específico Kiwify
};

async function processarIntencaoV12(msgCliente, nomeCliente) {
    const texto = msgCliente.toLowerCase();
    let resposta = "";
    let linkFinal = "";

    // Lógica de Decisão baseada em IA
    if (texto.includes("loja") || texto.includes("catálogo") || texto.includes("produtos")) {
        resposta = `Perfeito, ${nomeCliente}! Preparei uma vitrine exclusiva para você ver todos os nossos itens.`;
        linkFinal = DESTINOS.LOJA_DROPPFY;
    } 
    else if (texto.includes("comprar") || texto.includes("pagar") || texto.includes("preço")) {
        resposta = `Excelente escolha! Preparei o seu checkout seguro aqui. Você pode parcelar no Pix ou Cartão:`;
        linkFinal = DESTINOS.PRODUTO_DIRETO;
    }
    else if (texto.includes("contato") || texto.includes("quem são")) {
        resposta = `Aqui estão todas as nossas redes e contatos oficiais, ${nomeCliente}:`;
        linkFinal = DESTINOS.CARTAO_DIGITAL;
    }
    else {
        // Padrão: Vitrine Partner
        resposta = `Olá ${nomeCliente}! Veja as ofertas especiais que separei para você hoje:`;
        linkFinal = DESTINOS.VITRINE;
    }

    return { mensagem: resposta, link: linkFinal };
}

</SCRIPT>

    <script>
    VANTA.NET({
        el: "body", // O fundo do seu corpo inteiro
        mouseControls: true,
        touchControls: true,
        gyroControls: false,
        minHeight: 200.00,
        minWidth: 200.00,
        scale: 1.00,
        scaleMobile: 1.00,
        color: 0x00d4ff, // Cor dos pontos (seu azul V12)
        backgroundColor: 0x000000, // Fundo preto para contraste
        points: 15.00, // Densidade dos pontos na teia
        maxDistance: 20.00, // Distância para os pontos se conectarem
        spacing: 15.00 // Espaçamento entre as linhas
    })
</script>


  </body>
</html>
